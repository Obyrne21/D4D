<%- include('../partials/header'); -%>
<%- include('../partials/menu') %>
<body>
  <main>
    <center><h2 style="padding: 2%;">Search CTAM</h2></center>
    <div class="">
      <div class="container-fluid" style="padding: 2%; ">
        <form class="" action="/filter" method="post">
          <div class="row">
            <div class="col-3">

            </div>
            <div class="col-5">
              <input class="form-control" type="text" name="filter_name" placeholder="Filter by Competency Name">
              <br>
              <input class="form-control" type="text" name="comp_model_name" placeholder="Filter by Competency Model Name">
              <br>
              <input class="form-control" type="text" name="sub_comp_name" placeholder="Filter by Sub-Competency Name">
              <br>
              <label>Proficiency Level</label><br>
              <div class="d-flex justify-content-between">
                <div>
                  <input type="checkbox" id="expert" name="expert" value="Expert">
                  <label for="expert"> Expert</label> 
                </div>
                <div>
                  <input type="checkbox" id="advanced" name="advanced" value="Advanced">
                  <label for="advanced"> Advanced</label>
                </div>
                <div>
                <input type="checkbox" id="intermediate" name="intermediate" value="Intermediate">
                <label for="intermediate"> Intermediate</label> 
                </div>
                <div>
                <input type="checkbox" id="basic" name="basic" value="Basic">
                <label for="basic"> Basic</label> 
                </div>
              </div>
              <input type="checkbox" id="available" name="available" value="available">
              <label for="available"> Available</label> 
              <br>
              <input class="btn btn-primary" type="submit" name="Filter" value = "Filter"/>
            </div>
            <!-- <div class="col-1">
              <input class="btn btn-primary" type="submit" name="Filter" value = "Filter"/>
            </div> -->
          </div>
        </form>
      </div>
    </div>
    <div class="container">
    <table class = "table"> 
      <% if (items) {
        var table = '<tr><th>First Name</th><th>Last Name</th><th>Comp Model</th><th>Competency</th><th>Sub Comp</th><th>Proficiency</th></tr>';
        items.forEach(i => {
          table = table + "<tr><td><a href='/personnel?mid=" + i.pers_military_id + "'>" + i.pers_first_name + "</a></td>";
          table = table + "<td><a href='/personnel?mid=" + i.pers_military_id + "'>" + i.pers_last_name + "</a></td>";
          <!-- table = table + "<td><a href='/personnel?mid=" + i.pers_military_id + "'>" + i.pers_military_id + "</a></td>"; -->
          table = table + "<td><a href='/competency_model?model_id=" + i.comp_model_id + "'>" + i.comp_model_name + "</a></td>";
          table = table + "<td><a href='/competency?comp_id=" + i.comp_id + "'>" + i.comp_name + "</a></td>";
          table = table + "<td><a href='/sub_competency?sub_comp_id=" + i.sub_comp_id + "'>" + i.sub_comp_name + "</a></td>";
          table = table + "<td>" + i.prof_level + "</td></tr>";
        });
       } %>
       <%- table %>
    </table>
  </div>
  </main>
<%- include('../partials/footer'); -%>

